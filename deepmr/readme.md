# DeeP Mechanism Reduction (DeePMR)

DeePMR: DeeP Mechanism Reduction, develop DNN-based algorithms for reducing complex mechanisms.

## How to Use

The dmr package is a general mechanism simplification algorithm. In different mechanism simplification tasks, the user needs to provide dmr with the setting yaml `tasks_name/exp1/config.yaml`, as well as the mapping function from the simplification mechanism to each indicator `tasks_name/utils/get_datas.py`.

The input and output format of the get_data function is as follows:
    
```python  
def get_data(vector, settings, mode):
    """
    Args:
        vector: the vector representation of the reduced mechanism
        settings: the configuration information of the indicators
        mode:
            'true': the function is called for generating detailed mechanism data
            'parallel': the function is called for generating reduced mechanism data
        job_id: Union[int, None] = None
        worker_id: Union[int, None] = None
        count: Union[int, None] = None
    Returns:
        dict: the data of the vectors and corresponding indicators
    """
    return {'vector': vector, 'indicator_1': indicator_1, ..., 'indicator_n': indicator_n}
```

The parameter `job_id`, `worker_id` and `count` is used to output information when generating data in parallel. The `job_id` is the id of the current job, `worker_id` is the id of the current worker, and `count` is the number of the current iteration. The `job_id` and `worker_id` are used to distinguish the data generated by different jobs and workers, and the `count` is used to distinguish the data generated by the same job and worker in different iterations.

### Combustion task

The combustion task is in the folder `tasks_combustion`. The goal of the mission is to achieve a reduction of complex chemical combustion mechanisms and maintain the accuracy of the reduced mechanism in indicators such as ignition delay(IDT), equilibrium flame temperature and PSR extinction limit. 

The DeePMR combusiton package is based on the [Cantera](https://cantera.org/) package, so you need to install Cantera first. The DeePMR package is currently only available on Linux.

The detailed help documents can be found in [tasks_combustion/readme.md][combustion_task_documents].


#### Content of Models

This is a brief description of our reduced kinetic model, check the file readme.md in each sub-folder for detailed infomation.


| Model | Detailed Mechanism | Reduced<br>Species/Reactions | Detailed<br>Species/Reactions |
| :---: | :----: | :----: | :----: |
| [C101][C101]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |20/146 | 648/4846 |
| [C201][C201]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |19/120 | 648/4846 |
| [C301][C301]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |20/132 | 648/4846 |
| [C401][C401]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |21/138 | 648/4846 |
| [C402][C402]  |  [JKL_341sp_C0-C4_skeletal][JKL]  |27/149 | 341/1977 |
| [C501][C501]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |24/165 | 648/4846 |
| [C601][C601]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |24/162 | 648/4846 |
| [C701][C701]  |  [Dryer_116sp_PRF][Dryer]               |35/192 | 116/830  |
| [C702][C702]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |54/419 | 648/4846 |
| [C703][C703]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |49/354 | 648/4846 |
| [C704][C704]  |  [LLNL_648sp_gasoline_surrogate][LLNL]  |41/292 | 648/4846 |
| [C801][C801]  |  [GMIT_857sp_iso-octane][GMIT]          |46/301 | 857/6480 |


## Citation

We now have a [paper](https://arxiv.org/abs/2201.02025) you can cite for the reduced model library:

```
@article{wang2022deep,
  title={A deep learning-based model reduction (DeePMR) method for simplifying chemical kinetics},
  author={Wang, Zhiwei and Zhang, Yaoyu and Ju, Yiguang and Xu, Zhi-Qin John and Zhang, Tianhan},
  journal={arXiv preprint arXiv:2201.02025},
  year={2022}
}
```

[combustion_task_documents]:tasks_combustion/readme.md
[Dryer]:https://onlinelibrary.wiley.com/doi/abs/10.1002/kin.20253?casa_token=c6moaDb5X8cAAAAA:YuDVLaHFZ9_mSmRCt2ghEiAsH12Lbp1IIcXWmx8llSjXFCq0e9fkgvb3e2hwe6wKvPI52dnbqeUTUV0
[LLNL]:https://www.sciencedirect.com/science/article/pii/S1540748910000787?casa_token=OIW80_QsZB0AAAAA:I0alvoVky-3dZOqIFU-JCajEKagglHgnYbzjuKiXiD3ixFN7VeriIBfb_scKyTQzN2N_26UyQIk
[GMIT]:https://www.sciencedirect.com/science/article/pii/S001021800100373X?casa_token=KrGC-ED1BQAAAAAA:-yNgs5Ka1W8uqOxt2Eqc4d7yVS6Tz5G4wwvxYRGLZuVNLSzYX9U2YSu4IO8OjveAL-KsovkqV4E
[JKL]:https://pubs.acs.org/doi/10.1021/acs.energyfuels.1c00158
[C101]:tasks_combustion/published_reduced_mechanisms/C101_LLNL_methane_648sp_20sp_230307
[C201]:tasks_combustion/published_reduced_mechanisms/C201_LLNL_ethane_648sp_19sp_230307
[C301]:tasks_combustion/published_reduced_mechanisms/C301_LLNL_propane_648sp_20sp_230307
[C401]:tasks_combustion/published_reduced_mechanisms/C401_LLNL_n-butane_648sp_21sp_230307
[C402]:tasks_combustion/published_reduced_mechanisms/C402_JKL_n-butane_341sp_27sp_230307
[C501]:tasks_combustion/published_reduced_mechanisms/C501_LLNL_n-pentane_648sp_24sp_230307
[C601]:tasks_combustion/published_reduced_mechanisms/C601_LLNL_n-hexane_648sp_24sp_230307
[C701]:tasks_combustion/published_reduced_mechanisms/C701_Dryer_n-heptane_116sp_35sp_221017
[C702]:tasks_combustion/published_reduced_mechanisms/C702_LLNL_n-heptane_648sp_54sp_221014
[C703]:tasks_combustion/published_reduced_mechanisms/C703_LLNL_n-heptane_648sp_49sp_221027
[C704]:tasks_combustion/published_reduced_mechanisms/C704_LLNL_n-heptane_648sp_41sp_230307
[C801]:tasks_combustion/published_reduced_mechanisms/C801_GMIT_iso-octane_857sp_46sp_221015